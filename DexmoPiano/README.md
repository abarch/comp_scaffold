# Piano with Dexmo (2020)

This project is about guided learning of rhythm and timing.

A hand-exoskeleton and a keyboard (connected via MIDI) are used to record the user's musical performance as well as to give respective feedback to their fingers.


## Features
* Hier könnte Ihre Werbung stehen.


## Required software/packages
* Python 3.6
* python-rtmidi v1.4.1 (via PIP3, needs Debian/Ubuntu package *libjack-dev*)
* LilyPond [v2.18.2](http://lilypond.org/download/binaries/) (available in ubuntu bionic packages)
* python3-tk v3.6.9-1\~18.04 (available in ubuntu bionic packages)
* Qsynth v0.5.0-2 (available in ubuntu bionic packages) - e.g. if the keyboard does not have its own audio output
* vmpk v0.4.0-3 (available in ubuntu bionic packages) - virtual midi keyboard, if no physical one is available
* Debian/Ubuntu package *libasound-dev* might be required (if error "Cannot find alsa/asoundlib.h" occurs)

### requirements.txt
includes required python packages:
* pianoplayer v2.1.0
* MIDIUtil v1.2.1
* mido v1.2.9
* music21 v6.1.0

in order to install the packages run: 
```
$ pip3 install -r requirements.txt
```

## Prerequisites
* Properly connect Dexmo (Lego) and the keyboard/piano (the ports can be checked with the `aconnect` command)
* If used, Qsynth should be running beforehand


## Running the code
Starting the "main" program:
```
$ python3 dexmoPianoGui.py
```


## MIDI file generation
MIDI files are generated by the *generateMidi* function in [midiProcessing.py](https://github.com/abarch/comp_scaffold/blob/interactionLoop/DexmoPiano/midiProcessing.py).
The arguments are:

| Argument | Type | Explanation |
| ---: | :---: | :--- |
| noteValues | [float] | "Lengths" of the notes (e.g. 1, 1/2 etc.) |
| notesPerBar | [int] | Amounts of notes that a bar can contain |
| noOfBars | int | Number of bars (plus initial empty bar for metronome) |
| pitches | [int] | MIDI pitch numbers (0-127), see [here](https://newt.phys.unsw.edu.au/jw/notes.html) |
| bpm | int | Beats per minute |
| left | bool | *True*: generate notes for left hand |
| right | bool | *True*: generate notes for right hand |
| outfiles | [4× str] | Paths to output files: midi, midi+metronome, midi+metronome+dexmo, musicXML |

When running the program (GUI), most of these settings can be adjusted in the options window (click on *Specify next Task*)

To manually generate MIDI files, set the desired arguments at the bottom of the script and run
```
$ python3 midiGen.py
```





<!-- ## Authors
* **Janneke Simmering**
* **Jessica Seidel**
* **Tobias Coppenrath** -->


## License
This project is licensed under the GNU General Public License v3.0 - see the [LICENSE](LICENSE) file for details.


## Background
Group project for *Intelligent Systems*, organized by Alexandra Moringen and Guillaume Walck (Bielefeld University).
